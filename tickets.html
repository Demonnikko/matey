<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ–∫—É–ø–∫—É –±–∏–ª–µ—Ç–æ–≤...</title>
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: "Inter", -apple-system, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            text-align: center;
            padding: 20px;
        }

        .loader {
            border: 4px solid rgba(255, 215, 0, 0.3);
            border-top: 4px solid #ffd700;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        p {
            margin-bottom: 15px;
            line-height: 1.5;
        }

        a {
            color: #ffd700;
            text-decoration: underline;
        }
    </style>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (m, e, t, r, i, k, a) {
            m[i] = m[i] || function () { (m[i].a = m[i].a || []).push(arguments) };
            m[i].l = 1 * new Date();
            for (var j = 0; j < document.scripts.length; j++) { if (document.scripts[j].src === r) { return; } }
            k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
        })
            (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(106795279, "init", {
            clickmap: true,
            trackLinks: true,
            accurateTrackBounce: true,
            webvisor: true
        });
    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/106795279" style="position:absolute; left:-9999px;" alt="" /></div>
    </noscript>
    <!-- /Yandex.Metrika counter -->
</head>

<body>
    <div class="loader"></div>
    <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ.<br>–ú—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –±–∏–ª–µ—Ç–æ–≤...</p>
    <p><small>–ï—Å–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–µ–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É, <a id="manualLink" href="#">–Ω–∞–∂–º–∏—Ç–µ
                –∑–¥–µ—Å—å</a>.</small></p>

    <script>
        const TG_TOKEN = "7447528350:AAEXoBesH_21TzRLlR6SLfsC48WeneYEzGk";
        const TG_CHAT_ID = "269357522";
        const TARGET_URL = "https://quicktickets.ru/yaroslavl-illyuzionist-dmitrij-kostyuk/s6";

        // –§–æ—Ä–º–∏—Ä—É–µ–º —Ü–µ–ª–µ–≤—É—é —Å—Å—ã–ª–∫—É, —Å–æ—Ö—Ä–∞–Ω—è—è –≤—Å–µ –º–µ—Ç–∫–∏
        const currentParams = window.location.search;
        const finalRedirectUrl = TARGET_URL + currentParams;

        document.getElementById('manualLink').href = finalRedirectUrl;

        async function notifyAndRedirect() {
            const urlParams = new URLSearchParams(currentParams);
            const source = urlParams.get('utm_source') || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫';

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const text = `üéü <b>–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–æ–∫—É–ø–∫—É –±–∏–ª–µ—Ç–æ–≤ (Quick Tickets)</b>\n\nüìç <b>–ò—Å—Ç–æ—á–Ω–∏–∫:</b> ${source}`;

            try {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞, —á—Ç–æ–±—ã –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: TG_CHAT_ID,
                        text: text,
                        parse_mode: 'HTML'
                    })
                });
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞:", e);
            }

            // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º (0.8 —Å–µ–∫), —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–µ–ª –∑–∞–≥—Ä—É–∑—á–∏–∫
            // –∏ —á—Ç–æ–±—ã –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ–ª —É–π—Ç–∏
            setTimeout(() => {
                window.location.href = finalRedirectUrl;
            }, 800);
        }

        window.onload = notifyAndRedirect;
    </script>
</body>

</html>